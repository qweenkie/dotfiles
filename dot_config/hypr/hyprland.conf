## GENERAL SETTINGS
general {
	layout = dwindle

	border_size = 2

	gaps_in = 4  # [window] <-> [window]
	gaps_out = 2 # [window] <-> screen edge

	col.inactive_border = rgb(108,112,134)
	col.active_border = rgb(180,190,254)

	allow_tearing = true
}
dwindle {
	preserve_split = true
}
decoration {
	rounding = 8

	blur {
		enabled = true
		xray = true # Experimental optimization
	}
	shadow:enabled = true

	animations {
		# ~~~~   NAME       x0    y0    x1    y1 
		bezier = expo_io,   0.87, 0,    0.13, 1
		bezier = expo_out,  0.16, 1,    0.3,  1
		bezier = overshoot, 0.34, 1.56, 0.64, 1

		# ~~~~~~~   NAME         ONOFF SPEED CURVE      [STYLE]
		animation = global,      1,    2,    expo_io
		animation = windows,     1,    1.2,  expo_out,  gnomed
		animation = windowsMove, 1,    1.7,  overshoot
		animation = workspaces,  1,    0.7,  overshoot, slidevert

		animation = layers,      0
	}
}
input {
	kb_layout = us,ru,ua
	kb_options = grp:shift_caps_toggle,caps:none,fkeys:basic_13-24

	follow_mouse = 1
	focus_on_close = 1
}
group {
	auto_group = true
	drag_into_group = 2

	groupbar {
		font_size = 11
	}
}
misc {
	disable_hyprland_logo = true

	vrr = 3

	mouse_move_enables_dpms = true
	key_press_enables_dpms = true

	enable_swallow = true
}
xwayland {
	force_zero_scaling = true
	create_abstract_socket = true
}
render:direct_scanout = 2
ecosystem {
	no_update_news = true
	no_donation_nag = true
}

## MONITOR SETTINGS
monitor = ,highres,0x0,1

## PLUGINS
plugin {
	# https://github.com/VirtCode/hypr-dynamic-cursors
	dynamic-cursors {
		mode = stretch
		stretch {
			limit = 4000
			function = quadratic
			window = 150
		}

		shake:enabled = false

		hyprcursor {
			enabled = true
			nearest = true
		}
	}
}

## BINDS
#~ General
bind = SUPER, W, killactive
bind = SUPER, F, togglefloating
bind = SUPER, J, layoutmsg, togglesplit
# ~ [resize mode]
bind   = SUPER+SHIFT, R, submap, resize
submap = resize

binde  = ,H, resizeactive, -10  0
binde  = ,J, resizeactive,  0   10
binde  = ,K, resizeactive,  0  -10
binde  = ,L, resizeactive,  10  0

bind   = ,catchall, submap, reset # Press any key to exit resize mode
submap = reset

#~ Navigation
# ~ [focus movement between windows]
bind = SUPER, H, movefocus, l
bind = SUPER, J, movefocus, d
bind = SUPER, K, movefocus, u
bind = SUPER, L, movefocus, r
# ~ [window movement]
bind = SUPER+SHIFT, H, movewindoworgroup, l
bind = SUPER+SHIFT, J, movewindoworgroup, d
bind = SUPER+SHIFT, K, movewindoworgroup, u
bind = SUPER+SHIFT, L, movewindoworgroup, r
# ~ [focus movement between workspaces]
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10
# ~ [window movement between workspaces]
bind = SUPER+SHIFT, 1, movetoworkspace, 1
bind = SUPER+SHIFT, 2, movetoworkspace, 2
bind = SUPER+SHIFT, 3, movetoworkspace, 3
bind = SUPER+SHIFT, 4, movetoworkspace, 4
bind = SUPER+SHIFT, 5, movetoworkspace, 5
bind = SUPER+SHIFT, 6, movetoworkspace, 6
bind = SUPER+SHIFT, 7, movetoworkspace, 7
bind = SUPER+SHIFT, 8, movetoworkspace, 8
bind = SUPER+SHIFT, 9, movetoworkspace, 9
bind = SUPER+SHIFT, 0, movetoworkspace, 10
# ~ [special workspace]
bind = SUPER, S, togglespecialworkspace
bind = SUPER+SHIFT, S, movetoworkspace, special

#~ Applications
# ~ [unique applications]
bind = SUPER,      Escape, exec, pkill wlogout || wlogout
bind = SUPER,       Space, exec, pkill rofi || rofi -show drun
bind = SUPER+SHIFT, Space, exec, systemctl --user status waybar && systemctl --user stop waybar || systemctl --user start waybar
# ~ [non-unique applications]
bind = SUPER, Return, exec, kitty
bind = SUPER,      T, exec, Telegram
bind = SUPER,      X, exec, librewolf
bind = SUPER+SHIFT,X, exec, librewolf --private-window
# ~ [screenshot/picker utilities]
bind = SUPER, P, exec, hyprpicker -a
bind = SHIFT, Print, exec, hyprshot -zm region --clipboard-only
bind = CTRL,  Print, exec, hyprshot -zm region

#~ Special Keys (XF86)
# ~ [audio]
bindl = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+ -l 1.0
bindl = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-
bindl = ,XF86AudioMute,    exec, wpctl set-mut @DEFAULT_AUDIO_SINK@ toggle
bindl = ,XF86AudioMicMute, exec, wpctl set-mut @DEFAULT_AUDIO_SOURCE@ toggle
bindl = ,XF86AudioPlay, exec, playerctl play-pause
bindl = ,XF86AudioStop, exec, playerctl stop
bindl = ,XF86AudioPrev, exec, playerctl previous
bindl = ,XF86AudioNext, exec, playerctl next
# ~ [laptop keys]
bindl = ,XF86MonBrightnessUp,   exec, brightnessctl --class=backlight set +10%
bindl = ,XF86MonBrightnessDown, exec, brightnessctl --class=backlight set 10%-

## AUTOSTART
#~ Shell components
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprpolkitagent
exec-once = systemctl --user start hyprpaper
exec-once = systemctl --user start hypridle
exec-once = systemctl --user start mako
exec-once = systemctl --user start waybar
exec-once = hyprpm reload
exec-once = hyprctl setcursor Bibata-Modern-Ice 28
#~ Startup apps
exec-once = pidof steam || steam -silent

## RULES
#~ Screen Sharing (xwayland video bridge)
windowrule {
    name = xwayland-video-bridge-fixes
    match:class = xwaylandvideobridge

    no_initial_focus = true
    no_focus = true
    no_anim = true
    no_blur = true
    max_size = 1 1
    opacity = 0.0
}
#~ Steam
windowrule {
	name = steam
	match:class = ^(steam)$
	match:title = negative:^(Steam)$

	float = true
}
windowrule {
	name = drr-for-dota
	match:class = ^(dota2)$

	immediate = true
}
